---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: ddclient
  namespace: networking
spec:
  interval: 5m
  chart:
    spec:
      # renovate: registryUrl=https://k8s-at-home.com/charts/
      chart: ddclient
      version: 3.2.1
      sourceRef:
        kind: HelmRepository
        name: k8s-at-home-charts
        namespace: flux-system
  values:
    image:
      repository: linuxserver/ddclient
      tag: version-v3.9.1
    env:
      TZ: "${TZ}"
    config: 
      "# This is the configuration for ddclient\n
       # Inorder for it to function you need to set it up\n
       # e.g. this is the config for Cloudflare\n
       daemon=600\n
       use=web\n
       web=dynamicdns.park-your-domain.com/getip\n
       protocol=cloudflare\n
       ssl=yes\n
       ttl=1\n
       login=${SECRET_CLOUDFLARE_EMAIL}\n
       password=${SECRET_CLOUDFLARE_API_KEY}\n
       zone=marx.katowice.pl\n
       marxhome"
